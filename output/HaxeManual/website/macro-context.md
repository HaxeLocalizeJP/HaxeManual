## 9.1 マクロコンテクスト

> ##### Define: マクロコンテクスト
>
> マクロコンテクストとはマクロが実行される環境です。マクロの種別によって、クラスのビルドや、関数の型付けなどを行います。コンテクストについての情報は`haxe.macro.Context` APIを通して入手できます。

Haxeマクロはマクロの種類に応じて異なる、コンテクストの情報にアクセスできます。`Context`のAPIでは情報の問い合わせをするだけでなく、新しい型を定義したり、特定のコールバックを登録したりといった編集も行えます。以下で説明している通り、すべてのマクロの種類ですべての情報が利用可能なわけではないことに注意してください。

* 初期化マクロでは`Context.getLocal*()`メソッドは`null`を返します。初期化マクロのコンテクストでは、ローカルの型やメソッドはありません。
* ビルドマクロのみで`Context.getBuildFields()`からしかるべき値が返ってきます。その他のマクロでは、ビルドされるフィールドはありません。
* ビルドマクロでは、ローカルの型があります（ただし、不完全）が、ローカルのメソッドはありません。`Context.getLocalMethod()`は、`null`を返します。

`Context`のAPIは、`haxe.macro.Compiler`のAPIと合わせて完全なものになります。`haxe.macro.Compiler`について、詳しくは[初期化マクロ](macro-initialization.md)を参照してください。こちらのAPIはすべての種類のマクロで使用可能で、初期化マクロ以外からでもあらゆる編集が可能であることに注意しなくてはいけません。定義されていない[ビルド順序](macro-limitations-build-order.md)の自然な制限に逆らいます。つまり、例えば`Compiler.define()`でのフラグの定義は、そのフラグに対する[条件付きコンパイル](lf-condition-compilation.md)のチェックの後でも先でも影響を与えます。

---

Previous section: [マクロ](macro.md)

Next section: [引数](macro-arguments.md)